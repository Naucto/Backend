enum GameSessionVisibility {
  PUBLIC
  FRIENDS_ONLY
  PRIVATE
}

model GameSession {
  id        Int       @id @default(autoincrement())
  host      User      @relation("UserHostedGameSessions", fields: [hostId], references: [id])
  hostId    Int
  project   Project   @relation(fields: [projectId], references: [id])
  projectId Int
  startedAt DateTime  @default(now())
  endedAt   DateTime?

  visibility GameSessionVisibility @default(PRIVATE)
  otherUsers User[]                @relation("UserJoinedGameSessions")

  @@index([hostId])
  @@index([projectId])
}

model WorkSession {
  id        Int      @id @default(autoincrement())
  users     User[]   @relation("WorkSessionUsers")
  host      User     @relation("WorkSessionHost", fields: [hostId], references: [id])
  hostId    Int
  project   Project  @relation(fields: [projectId], references: [id])
  projectId Int      @unique
  startedAt DateTime @default(now())
  lastSave  DateTime @default(now())

  roomId       String @unique @default(uuid())
  roomPassword String @default(uuid())

  @@index([projectId])
  @@index([hostId])
}
